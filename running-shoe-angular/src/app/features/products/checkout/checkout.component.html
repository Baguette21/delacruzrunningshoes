<div class="checkout-container" *ngIf="!orderPlaced">
  <div class="container py-5">
    <h1 class="page-title">
      <i class="bi bi-cart-check me-3"></i>Checkout
    </h1>

    <div class="row">
      <!-- Cart Items Section -->
      <div class="col-lg-7">
        <div class="cart-section">
          <h2 class="section-title">Order Summary</h2>
          
          <div class="cart-items">
            <div class="cart-item" *ngFor="let item of cartItems; let i = index">
              <div class="item-image">
                <img [src]="getShoeImagePath(item.shoe.name)" [alt]="item.shoe.name">
              </div>
              
              <div class="item-details">
                <div class="item-brand">{{ item.shoe.brand }}</div>
                <div class="item-name">{{ item.shoe.name }}</div>
                <div class="item-size">
                  Size: {{ item.gender === 'MEN' ? "Men's" : "Women's" }} US {{ item.size }}
                </div>
              </div>

              <div class="item-quantity">
                <button class="qty-btn" (click)="updateQuantity(i, item.quantity - 1)">
                  <i class="bi bi-dash"></i>
                </button>
                <span class="qty-value">{{ item.quantity }}</span>
                <button class="qty-btn" (click)="updateQuantity(i, item.quantity + 1)">
                  <i class="bi bi-plus"></i>
                </button>
              </div>

              <div class="item-price">
                ₱{{ (item.shoe.price * item.quantity).toLocaleString() }}
              </div>

              <button class="item-remove" (click)="removeItem(i)" title="Remove item">
                <i class="bi bi-trash"></i>
              </button>
            </div>
          </div>

          <div class="cart-total">
            <span class="total-label">Total Amount:</span>
            <span class="total-value">₱{{ totalAmount.toLocaleString() }}</span>
          </div>
        </div>
      </div>

      <!-- Customer Details Section -->
      <div class="col-lg-5">
        <div class="details-section">
          <h2 class="section-title">Shipping Details</h2>
          
          <form class="checkout-form">
            <div class="form-group">
              <label class="form-label">
                <i class="bi bi-person me-2"></i>Full Name *
              </label>
              <input 
                type="text" 
                class="form-control" 
                [(ngModel)]="customerName" 
                name="customerName" 
                placeholder="Enter your full name"
                required>
            </div>

            <div class="form-group">
              <label class="form-label">
                <i class="bi bi-envelope me-2"></i>Email (Optional)
              </label>
              <input 
                type="email" 
                class="form-control" 
                [(ngModel)]="email" 
                name="email" 
                placeholder="your.email@example.com"
                pattern=".*@.*\.com$">
            </div>

            <div class="form-group">
              <label class="form-label">
                <i class="bi bi-telephone me-2"></i>Contact Number *
              </label>
              <input 
                type="tel" 
                class="form-control" 
                [(ngModel)]="contactNumber" 
                name="contactNumber" 
                placeholder="09XXXXXXXXX"
                pattern="09[0-9]{9}"
                maxlength="11"
                required>
            </div>

            <div class="form-group">
              <label class="form-label">
                <i class="bi bi-geo-alt me-2"></i>Shipping Address *
              </label>
              <textarea 
                class="form-control" 
                [(ngModel)]="shippingAddress" 
                name="shippingAddress" 
                rows="4"
                placeholder="Enter your complete shipping address"
                required></textarea>
            </div>

            <div class="payment-note">
              <i class="bi bi-info-circle me-2"></i>
              <span>Payment details will be provided after order confirmation.</span>
            </div>

            <div class="checkout-actions">
              <button 
                type="button" 
                class="btn-continue" 
                (click)="continueShopping()">
                <i class="bi bi-arrow-left me-2"></i>Continue Shopping
              </button>
              <button 
                type="button" 
                class="btn-place-order" 
                (click)="placeOrder()"
                [disabled]="isProcessing || !customerName || !contactNumber || !shippingAddress">
                <i class="bi me-2" [ngClass]="isProcessing ? 'bi-hourglass-split' : 'bi-check-circle'"></i>
                {{ isProcessing ? 'Processing...' : 'Place Order' }}
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Order Success -->
<div class="success-container" *ngIf="orderPlaced">
  <div class="success-content">
    <div class="success-icon">
      <i class="bi bi-check-circle-fill"></i>
    </div>
    <h1 class="success-title">Order Placed Successfully!</h1>
    <p class="success-message">
      Thank you, {{ customerName }}! Your order has been received.
    </p>
    <p class="success-submessage">
      We'll contact you at {{ contactNumber }} for payment and delivery details.
    </p>
    <div class="success-redirect">
      <i class="bi bi-arrow-right me-2"></i>
      Redirecting to shop...
    </div>
  </div>
</div>

